<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="Descripcion" content="Cinepuma: Estrenos y películas populares.">
    <title>Cinepuma</title>
    <link rel="stylesheet" href="../css/index.css"> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Estilo rápido para la bienvenida del usuario */
        #user-welcome {
            color: white;
            font-size: 0.9rem;
            margin-left: 20px;
        }
        #logout-link {
            color: #ff4b2b;
            text-decoration: none;
            cursor: pointer;
            margin-left: 10px;
            font-weight: bold;
        }
    </style>
</head>

<body>

    <header>
        <div class="logo">
            <img src="../img/Logo_Cinepuma.png" alt="Logo Cinepuma">
            <h1><a href="index.html">CinePuma</a></h1>
            <div id="user-welcome">Cargando...</div>
        </div>
 
        <nav>
            <a href="Generos/generos.html">Género</a>
            <a href="mejorValoradas.html">Mejores valoradas</a>
            <a href="ayuda.html">Ayuda</a>
        </nav>
    </header>

    <main class="container-fluid mt-4">
        <h2 class="text-center mb-4 main-title">Estrenos Destacados</h2>

        <div id="carruselCinepuma" class="carousel slide" data-bs-ride="carousel">

            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carruselCinepuma" data-bs-slide-to="0" class="active"
                    aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carruselCinepuma" data-bs-slide-to="1"
                    aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carruselCinepuma" data-bs-slide-to="2"
                    aria-label="Slide 3"></button>
                <button type="button" data-bs-target="#carruselCinepuma" data-bs-slide-to="3"
                    aria-label="Slide 4"></button>
            </div>

            <div class="carousel-inner rounded-4 shadow-lg">
                <div class="carousel-item active" data-bs-interval="4000">
                    <img src="https://portalgeek.co/wp-content/uploads/2025/04/el-contador-2.webp"
                        class="d-block w-100 imagen-carrusel" alt="El Contador 2">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>El Contador 2</h5>
                        <p>La acción regresa más intensa que nunca.</p>
                    </div>
                </div>

                <div class="carousel-item" data-bs-interval="4000">
                    <img src="https://img.pccomponentes.com/pcblog/7571/oppenheimer-portada-pelicula.jpg"
                        class="d-block w-100 imagen-carrusel" alt="Oppenheimer">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>Oppenheimer</h5>
                        <p>El mundo cambiará para siempre.</p>
                    </div>
                </div>

                <div class="carousel-item" data-bs-interval="4000">
                    <img src="https://beam-images.warnermediacdn.com/BEAM_LWM_DELIVERABLES/dfa50804-e6f6-4fa2-a732-693dbc50527b/37082735-6715-11ef-96ad-02805d6a02df?host=wbd-images.prod-vod.h264.io&partner=beamcom&w=500"
                        class="d-block w-100 imagen-carrusel" alt="The Batman">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>The Batman</h5>
                        <p>La venganza llega a Gotham.</p>
                    </div>
                </div>

                <div class="carousel-item" data-bs-interval="4000">
                    <img src="https://img.asmedia.epimg.net/resizer/v2/JQICFOMJHJBVTJR4VLEKL655DE.jpg?auth=0ab8fe8c6b795be44361cc7f4d113dbe6d62a02c7ea6555dd8ff35c18053e675&width=1472&height=828&smart=true"
                        class="d-block w-100 imagen-carrusel" alt="Chainsaw Man El arco de Reze">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>Chainsawman El arco de Reze</h5>
                        <p>El amor fugaz de Deji y la lucha contra el demonio bomba</p>
                    </div>
                </div>
            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#carruselCinepuma" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Anterior</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carruselCinepuma" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Siguiente</span>
            </button>
        </div>

        <section class="movie-section">
            <h2 id="movieSectionTitle">Películas Populares</h2>
            <div class="movie-row-container" id="movieRowContainer">
                </div>
        </section>
    </main>

    <footer>
        <ul>
            <li>
                <img src="../img/icono_del_telefono-remove.png" alt="icono telefono"
                    style="vertical-align: middle; width: 36px; height: 36px;">
                Teléfono: 123-456-7890
            </li>
            <li>
                <img src="../img/icono_del_correo.png" alt="icono correo"
                    style="vertical-align: middle; width: 36px; height: 36px;">
                Email: CinePuma@gmail.com
            </li>
        </ul>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyChKzHT4ZT-z6156HacMYDdImWFrq98174",
            authDomain: "cinepuma-2026.firebaseapp.com",
            projectId: "cinepuma-2026",
            storageBucket: "cinepuma-2026.firebasestorage.app",
            messagingSenderId: "628367090771",
            appId: "1:628367090771:web:4394f16d34a7ba130992a6"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const welcomeElement = document.getElementById('user-welcome');

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                // Obtener el nombre del usuario desde Firestore usando su UID como Primary Key
                const userDoc = await getDoc(doc(db, "usuarios", user.uid));
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    welcomeElement.innerHTML = `Hola, <strong>${userData.nombre_usuario}</strong> | <span id="logout-link">Cerrar Sesión</span>`;
                    
                    document.getElementById('logout-link').addEventListener('click', () => {
                        signOut(auth).then(() => window.location.reload());
                    });
                }
            } else {
                welcomeElement.innerHTML = `<a href="login.html" style="color:white; text-decoration:none;">Iniciar Sesión</a>`;
            }
        });
    </script>

    <script type="module" src="../js/index.js"></script> 

</body>
</html>